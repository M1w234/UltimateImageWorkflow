# Nana Banana Pro - Cursor IDE Rules

This is Nana Banana Pro - a multi-mode AI image/video tool with 6 operational modes.

## Project Architecture

### Key Patterns
- API calls go in `src/services/` (geminiApi.js, openaiApi.js, klingApi.js)
- Each mode is a separate component in `src/components/`
- Use IndexedDB via `src/utils/storage.js` for persistent data
- Constants and model definitions in `src/utils/constants.js`
- Sound effects handled by `src/utils/soundUtils.js`
- Image utilities in `src/utils/imageUtils.js`
- Maintain separation of concerns between components

### Tech Stack
- React 18 + Vite
- Tailwind CSS for styling
- IndexedDB for local storage (images, history, collection)
- Three AI APIs: Google Gemini, OpenAI, Kling/PiAPI
- lucide-react for icons

### Six Modes
1. **Analyze** - GPT Vision for image analysis (OpenAI API)
2. **Edit** - Single image editing with Gemini
3. **Multi-Edit** - Batch process multiple images with same prompt
4. **Combine** - Multi-image generation (multiple inputs → one output)
5. **Generate** - Text-to-image generation
6. **Video** - Kling AI video generation

### State Management
- useState for component state
- localStorage for settings/preferences (API keys, model selections)
- IndexedDB for data persistence (images, history, analysis)
- No Redux/Zustand - keep it simple

### When Adding Features
1. Follow existing patterns in similar components
2. Update `src/utils/constants.js` for new models
3. Add new modes as separate components in `src/components/`
4. Keep API logic in service files (`src/services/`)
5. Keep components under 300 lines when possible
6. Use the shared ImageModal for image previews
7. Always save generated content to history via IndexedDB

### Important Notes
- API keys are stored in localStorage, never in IndexedDB
- The `resetNanaBananaStorage` function is exposed globally for debugging
- Each browser tab operates independently
- Sound effects play on successful generation (Web Audio API)
- All modes share the same Collection panel

### File Organization
```
src/
├── main.jsx              # Entry point
├── App.jsx               # Main app with mode tabs
├── components/
│   ├── ApiKeySettings.jsx
│   ├── AnalyzeMode.jsx
│   ├── EditMode.jsx
│   ├── MultiEditMode.jsx
│   ├── CombineMode.jsx
│   ├── GenerateMode.jsx
│   ├── KlingMode.jsx
│   ├── HistoryPanel.jsx
│   ├── CollectionPanel.jsx
│   └── ImageModal.jsx
├── services/
│   ├── geminiApi.js
│   ├── openaiApi.js
│   └── klingApi.js
├── utils/
│   ├── constants.js
│   ├── storage.js
│   ├── imageUtils.js
│   └── soundUtils.js
└── styles/
    └── globals.css
```
